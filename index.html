<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>My CV</title>
    <link href='http://fonts.googleapis.com/css?family=Oswald:400,700' rel='stylesheet' type='text/css'>
    <link type="text/css" rel="stylesheet" href="css/style.css" />
    <link type="text/css" rel="stylesheet" href="css/mygrid.css" />
  </head>
  <body class="gcont">
    <header id="mainInfo"class="gr">
      <div class="gc-8 gcent">
        <div class="gr">
          <div class="gc-6 idinfo">
            <h1>{{name}} {{surname}}</h1>
            <h4>{{phone}}</h4>
            <h4><a href='mailto:{{mail}}'>{{mail}}</a></h4>
            <h5>{{website}}</h5>
          </div>
          <div class="gc-6 tcenter idfoto" style="">
            <div class="gr">
              <div class="gc-6 gcent">
                <img
                  class="circle ro"
                  src="http://churchm.ag/wp-content/uploads/2012/01/LEGO-head.png" />
              </div>
            </div>

          </div>
        </div>
      </div>
    </header>
    <main>
      <div class="gr">
        <section class="gc-8 history">
          <div class="gr event">
            <div class="gc-3 date">
              <p>{{date}}</p>
            </div>
            <div class="gc-2 cicon">
              <img src="img/icons/{{icon}}.png" />
            </div>
            <div class="gc-5 desc">
              <h4>{{title}}</h4>
              <p>{{description}}</p>
            </div>
          </div>
        </section>
        <section class="gc-4 skills">
        </section>
      </div>
    </main>
    <footer></footer>
    <script type="text/javascript" src="js/minij.js"></script>
    <script type="text/javascript" src="js/data.js"></script>
    <script type="text/javascript">
      var getDate = function(str){
          if(str == 'TODAY')
            return new Date();
          var sp = str.split('-');
          return new Date(sp[2],(sp[1]-1),sp[0]);
      };
      var months = function(d1,d2){
        return (d2.getFullYear()-d1.getFullYear())*12 - d1.getMonth() + d2.getMonth();
      }

      var htmle = j('.event');
      var p = htmle.e().parentNode;
      var i = 0;

      j('#mainInfo').parse(main);
      var today = new Date();
      var born = getDate(events[0].date[0]);
      var myMonths = (today.getFullYear()-born.getFullYear())*12 - 2 + today.getMonth();
      console.log(myMonths);
      var nevents = events.length -1;
      var pDate  = born;
      for(var i in events){
        var elem = events[i];
        var bDate, eDate;
        if(elem.date.length === 2){
          bDate = getDate(elem.date[0]);
          eDate = getDate(elem.date[1]);
        } else
          bDate = eDate = getDate(elem.date[0]);
        var height = months(bDate,eDate);
        var mTop = months(pDate,bDate);
        pDate = eDate;
        console.log(bDate + ' ' + eDate + ' ' + height + ' ' + mTop);
        var temp = htmle.e().cloneNode(true);
        htmle.parse(elem);
        if(mTop < 0){
          htmle.e().style.marginLeft = '2em';
          htmle.e().style.marginTop = 8 + mTop +'em';
        } else {

        }
        htmle.e().style.height = (6+ height)*1.5 + 'em';
        if(i>0) p.appendChild(htmle.e());
        htmle = j(temp);
        //htmle.hide();
      }
    </script>

    <script type="text/javascript" src="js/script.js"></script>
  </body>
</html>
